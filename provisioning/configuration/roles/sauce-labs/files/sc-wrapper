#!/usr/bin/env python

# The WPT CLI does not allow users to enable all options supported by
# the Sauce Connect binary. This script serves as an intermediary which
# enables some options and passes any additional options along to the
# "true" Sauce Connect binary.

import signal
import subprocess
import sys

# The WPT CLI ends the Sauce Connect process with a SIGTERM signal, so care
# must be taken to forward this signal to the child process
signal.signal(signal.SIGINT, lambda _, __: proc.kill())
signal.signal(signal.SIGTERM, lambda _, __: proc.terminate())

args = [
    '--logfile', '/var/log/sauce-connect/sc.log'
] + sys.argv[1:]

proc = subprocess.Popen(['sc'] + args)

proc.communicate()
